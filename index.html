<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Trivia Thief ‚Äî Quiz</title>
<style>
  :root{
    --bg: #fff6e5;
    --card: #fffdfa;
    --accent: #ff9800;
    --primary: #ffb300;
    --muted: #666;
    --success: #4caf50;
    --danger: #f44336;
  }
  html,body{height:100%;margin:0}
  body{
    background: var(--bg);
    font-family: "Segoe UI", Roboto, Arial, sans-serif;
    display:flex; align-items:center; justify-content:center; padding:16px;
  }
  .screen {
    background: var(--card);
    width:100%; max-width:420px;
    border-radius:18px; box-shadow:0 8px 28px rgba(0,0,0,0.12);
    padding:26px; box-sizing:border-box; text-align:center; position:relative; overflow:hidden;
  }
  .logo{ width:100px; height:auto; margin-bottom:10px; }
  h1{ margin:6px 0 4px; font-family:"Comic Sans MS", cursive; color:var(--accent); font-size:28px; }
  .tag{ margin:0 0 12px; color:#444; font-weight:600; font-size:14px; }

  input[type="text"]{
    width:100%; padding:12px 14px; border-radius:20px; border:1px solid #e0e0e0;
    font-size:16px; box-sizing:border-box; background:#eaf2ff; margin-bottom:14px; text-align:center;
  }

  .avatars{ display:flex; gap:12px; justify-content:center; margin-bottom:12px; flex-wrap:wrap; }
  .avatar{
    width:64px; height:64px; border-radius:50%; display:flex; align-items:center; justify-content:center;
    font-size:34px; cursor:pointer; border:3px solid transparent; box-shadow:0 3px 8px rgba(0,0,0,0.08);
    transition: transform .18s, border-color .18s, box-shadow .18s; background:white;
  }
  .avatar:hover{ transform:translateY(-4px) }
  .avatar.selected{ border-color:var(--primary); transform:scale(1.08); box-shadow:0 8px 18px rgba(255,165,0,0.15); }

  .btn{
    display:inline-block; width:100%; padding:14px; border-radius:28px; border:none;
    background: linear-gradient(135deg,var(--primary),var(--accent)); color:white; font-weight:700; font-size:16px;
    cursor:pointer; box-shadow:0 8px 18px rgba(255,152,0,0.22); transition: transform .12s, box-shadow .12s;
  }
  .btn.small{ width:auto; padding:10px 12px; border-radius:20px; font-size:14px; }
  .btn:active{ transform:scale(.99); }

  .stack{ display:flex; flex-direction:column; gap:12px; align-items:stretch; }

  .progress-bar{ height:10px; background:#eee; border-radius:8px; overflow:hidden; margin-bottom:12px; }
  .progress-fill{ height:100%; width:0%; background:var(--primary); transition:width 0.25s linear; }

  .question{ font-weight:700; font-size:18px; margin:8px 0 14px; color:#222; min-height:48px; display:flex; align-items:center; justify-content:center; }
  .options{ display:flex; flex-direction:column; gap:10px; margin-top:8px; }
  .answer-btn{
    background:#fff; border:2px solid #ffd796; padding:12px; border-radius:12px; cursor:pointer;
    font-weight:600; color:#222; transition: transform .08s, background .12s, border-color .12s;
  }
  .answer-btn:hover{ transform:translateY(-3px) }
  .answer-btn.correct{ background:var(--success); color:white; border-color:rgba(0,0,0,0.06); }
  .answer-btn.wrong{ background:var(--danger); color:white; border-color:rgba(0,0,0,0.06); }
  .answer-btn.disabled{ opacity:.6; cursor:not-allowed; transform:none; }

  .lifelines{ display:flex; gap:10px; justify-content:center; margin-top:12px; }
  .lifeline-btn{
    width:56px; height:56px; border-radius:50%; display:grid; place-items:center;
    background: linear-gradient(135deg,var(--primary),var(--accent)); color:white; font-size:22px; border:none;
    box-shadow:0 8px 18px rgba(255,152,0,0.16); cursor:pointer;
  }
  .lifeline-btn.used{ opacity:.45; transform:scale(.96); cursor:not-allowed; }

  .funfact{
    position:fixed; left:50%; transform:translateX(-50%); bottom:-120px;
    background:#fff8e1; padding:12px 18px; border-radius:14px; box-shadow:0 8px 22px rgba(0,0,0,0.12);
    transition:bottom .35s ease, opacity .35s ease; opacity:0; z-index:40; max-width:90%; font-size:14px; color:#5b4a00;
  }
  .funfact.show{ bottom:28px; opacity:1; }

  .badge{ width:96px; height:96px; border-radius:50%; margin:10px auto 6px; display:flex; align-items:center; justify-content:center;
    background:linear-gradient(180deg,#ffd54f,#ffb300); box-shadow:0 8px 30px rgba(255,183,77,0.3); transform:scale(.85); transition:transform .45s cubic-bezier(.2,.9,.2,1);
  }
  .badge.win{ transform:scale(1.08); animation:sparkle 1.6s linear infinite; }
  @keyframes sparkle { 0%{box-shadow:0 8px 30px rgba(255,183,77,0.3)}50%{box-shadow:0 14px 40px rgba(255,183,77,0.45)}100%{box-shadow:0 8px 30px rgba(255,183,77,0.3)} }

  .meta{ font-size:14px; color:var(--muted); margin-top:8px }
  .row{ display:flex; gap:8px; align-items:center; justify-content:center; margin-top:8px }
  .avatar-small{ width:36px;height:36px;border-radius:50%; }

  .view{ display:none; }
  .view.active{ display:block; animation:fadeIn .28s ease both; }
  @keyframes fadeIn{ from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }

  @media (max-width:420px){
    .screen{ padding:18px; border-radius:16px; }
    .logo{ width:88px; }
    .avatar{ width:56px;height:56px;font-size:30px; }
    .lifeline-btn{ width:48px;height:48px;font-size:20px; }
  }
</style>
</head>
<body>

<div class="screen" role="application" aria-label="Trivia Thief Game">

  <!-- Start View -->
  <div id="view-start" class="view active">
    <img src="c65af28a-f6d2-4671-93b0-e1eb499e3b6c_removalai_preview.png" class="logo" alt="Logo">
    <p class="tag"><strong>A Game Can Make You Millionaire</strong></p>
    <h1>QUIZ GAME</h1>

    <div class="avatars" id="avatarRow">
      <div class="avatar" data-id="cat" title="Cat avatar" aria-label="Cat avatar">üê±</div>
      <div class="avatar" data-id="dog" title="Dog avatar" aria-label="Dog avatar">üê∂</div>
      <div class="avatar" data-id="owl" title="Owl avatar" aria-label="Owl avatar">ü¶â</div>
      <div class="avatar" data-id="alien" title="Alien avatar" aria-label="Alien avatar">üëΩ</div>
    </div>

    <input id="nameInput" type="text" placeholder="Enter your name" aria-label="Enter your name">
    <div style="height:10px"></div>
    <button id="startBtn" class="btn" aria-label="Start">Start</button>
    <div class="meta">Tap avatar, enter name, then press Start</div>
  </div>

  <!-- Difficulty View -->
  <div id="view-difficulty" class="view" aria-hidden="true">
    <h2>Select Difficulty</h2>
    <div class="stack">
      <button class="btn" onclick="pickDifficulty('easy')">Easy</button>
      <button class="btn" onclick="pickDifficulty('medium')">Medium</button>
      <button class="btn" onclick="pickDifficulty('hard')">Hard</button>
    </div>
    <div class="meta">Questions will be pulled randomly from the chosen pool.</div>
    <div style="margin-top:12px"><button class="btn small" onclick="showView('view-start')">Back</button></div>
  </div>

  <!-- Quiz View -->
  <div id="view-quiz" class="view" aria-hidden="true">
    <div class="progress-bar" aria-hidden="true"><div id="progressFill" class="progress-fill"></div></div>
    <div id="questionText" class="question">Question will appear here</div>
    <div id="optionsContainer" class="options" role="list"></div>

    <div class="row lifelines" style="margin-top:18px">
      <button id="btn5050" class="lifeline-btn" title="50/50" aria-label="50/50 lifeline">üîÄ</button>
      <button id="btnHint" class="lifeline-btn" title="Hint" aria-label="Hint lifeline">üí°</button>
    </div>

    <div id="timerText" class="meta" style="margin-top:12px">Time left: <strong id="timerValue">10</strong>s</div>
  </div>

  <!-- End View -->
  <div id="view-end" class="view" aria-hidden="true">
    <div id="badge" class="badge" aria-hidden="true">üèÜ</div>
    <h2 id="endTitle">You Win!</h2>
    <div id="playerSummary" class="meta"></div>

    <div style="margin-top:12px">
      <button class="btn" onclick="restartFromEnd()">Play Again</button>
      <button class="btn small" style="margin-top:8px" onclick="returnToMenu()">Main Menu</button>
    </div>

    <div style="margin-top:14px; text-align:left;">
      <h3 style="margin:8px 0 6px;">Leaderboard</h3>
      <ol id="leaderboardList" style="padding-left:18px; margin:0 0 6px 0;"></ol>
    </div>
  </div>

</div>

<!-- Fun fact popup -->
<div id="funFact" class="funfact" aria-hidden="true"></div>

<script>
/* ---------- data & state ---------- */
const questionBank = {
  easy: [ /* 10 easy */ { q:"2 + 2 = ?", options:["3","4","5","6"], answer:"4", hint:"Even", fact:"2+2=4 ‚Äî basic math" },
          { q:"Color of the sky?", options:["Blue","Green","Red","Yellow"], answer:"Blue", hint:"Daytime", fact:"Sky appears blue due to scattering" },
          { q:"Which animal barks?", options:["Cat","Dog","Cow","Tiger"], answer:"Dog", hint:"Man's best friend", fact:"Dogs bark to communicate." },
          { q:"Sun rises in?", options:["North","South","East","West"], answer:"East", hint:"Opposite of west", fact:"Because Earth rotates west‚Üíeast." },
          { q:"How many days in week?", options:["5","6","7","8"], answer:"7", hint:"Lucky number", fact:"A week has seven days." },
          { q:"Closest planet to sun?", options:["Venus","Mercury","Earth","Mars"], answer:"Mercury", hint:"Small and fast", fact:"Mercury orbits closest to Sun." },
          { q:"What do bees make?", options:["Milk","Honey","Wine","Bread"], answer:"Honey", hint:"Sweet", fact:"Bees make honey from nectar." },
          { q:"Which is a fruit?", options:["Carrot","Apple","Potato","Spinach"], answer:"Apple", hint:"Keeps doctor away", fact:"Apples grow on trees." },
          { q:"We breathe in?", options:["Oxygen","Carbon dioxide","Helium","Argon"], answer:"Oxygen", hint:"Essential to life", fact:"Oxygen is essential for respiration." },
          { q:"Shape with 4 equal sides?", options:["Triangle","Circle","Square","Pentagon"], answer:"Square", hint:"All sides equal", fact:"A square has 4 equal sides." }
        ],
  medium: [ /* 10 medium */
    { q:"Capital of France?", options:["Berlin","Paris","Rome","Madrid"], answer:"Paris", hint:"City of Light", fact:"Paris is very famous." },
    { q:"Who wrote '1984'?", options:["Orwell","Huxley","Austen","Shakespeare"], answer:"Orwell", hint:"Also wrote Animal Farm", fact:"George Orwell wrote 1984." },
    { q:"Square root of 144?", options:["10","11","12","13"], answer:"12", hint:"A dozen", fact:"12 √ó 12 = 144." },
    { q:"Gas needed for combustion?", options:["Nitrogen","Oxygen","CO2","Helium"], answer:"Oxygen", hint:"We breathe it", fact:"Oxygen supports fire." },
    { q:"Fastest land animal?", options:["Lion","Cheetah","Elephant","Horse"], answer:"Cheetah", hint:"Spotted cat", fact:"Cheetahs exceed 100 km/h." },
    { q:"Largest planet?", options:["Earth","Jupiter","Mars","Venus"], answer:"Jupiter", hint:"Has Great Red Spot", fact:"Jupiter is the biggest planet." },
    { q:"Which is prime?", options:["4","6","7","9"], answer:"7", hint:"Less than 10", fact:"7 is prime." },
    { q:"CPU stands for?", options:["Central Process Unit","Central Processing Unit","Computer Process Unit","Core Processing Unit"], answer:"Central Processing Unit", hint:"It's the brain", fact:"CPU executes programs." },
    { q:"Which continent is Australia?", options:["Europe","Asia","Australia","Africa"], answer:"Australia", hint:"Same as country", fact:"Australia is both a country and continent." },
    { q:"Which organ pumps blood?", options:["Brain","Liver","Lungs","Heart"], answer:"Heart", hint:"Keeps you alive", fact:"Heart circulates blood." }
  ],
  hard: [ /* 10 hard */
    { q:"Who developed relativity?", options:["Newton","Einstein","Bohr","Tesla"], answer:"Einstein", hint:"E=mc¬≤", fact:"Einstein proposed relativity." },
    { q:"Atomic number of Oxygen?", options:["6","7","8","9"], answer:"8", hint:"Even number", fact:"Oxygen is atomic number 8." },
    { q:"Speed of light approx?", options:["3√ó10^8 m/s","3√ó10^6 m/s","3√ó10^5 m/s","3√ó10^7 m/s"], answer:"3√ó10^8 m/s", hint:"Very fast", fact:"Light is ~300,000 km/s." },
    { q:"Avogadro's number approx?", options:["6.02√ó10^23","3.14","1.6√ó10^-19","9.8"], answer:"6.02√ó10^23", hint:"Huge", fact:"Particles in one mole." },
    { q:"Element with symbol 'Au'?", options:["Silver","Gold","Argon","Platinum"], answer:"Gold", hint:"Precious metal", fact:"Au = Aurum (Latin)." },
    { q:"Heisenberg principle about?", options:["Energy levels","Uncertainty","Gravity","Electrostatics"], answer:"Uncertainty", hint:"Measurement limits", fact:"Limits precision of position & momentum." },
    { q:"Laws of motion by?", options:["Einstein","Newton","Kepler","Galileo"], answer:"Newton", hint:"Three laws", fact:"Newton formulated them." },
    { q:"Which is a fermion?", options:["Photon","Electron","Gluon","W boson"], answer:"Electron", hint:"Has charge -1", fact:"Electrons are fermions." },
    { q:"Planck constant approx?", options:["6.63√ó10^-34 J¬∑s","9.81","1.6√ó10^-19","3.0√ó10^8"], answer:"6.63√ó10^-34 J¬∑s", hint:"Quantum", fact:"Fundamental in QM." },
    { q:"Who invented telephone?", options:["Edison","Bell","Tesla","Marconi"], answer:"Bell", hint:"Alexander G.", fact:"Bell is credited with telephone." }
  ]
};

let state = {
  name: '', avatarId: '', difficulty:'', pool:[], index:0, correctCount:0,
  timerVal:10, timerHandle:null, used5050:false, usedHint:false
};

/* ---------- helpers ---------- */
const byId = id => document.getElementById(id);
const showView = id => {
  document.querySelectorAll('.view').forEach(v=>{ v.classList.remove('active'); v.setAttribute('aria-hidden','true'); });
  const el = byId(id); el.classList.add('active'); el.setAttribute('aria-hidden','false');
};

/* ---------- start screen ---------- */
const avatarEls = document.querySelectorAll('.avatar');
avatarEls.forEach(a=>{
  a.addEventListener('click', ()=> {
    avatarEls.forEach(x=>x.classList.remove('selected'));
    a.classList.add('selected');
    state.avatarId = a.dataset.id;
  });
});
byId('startBtn').addEventListener('click', ()=>{
  const nm = (byId('nameInput').value||'').trim();
  if(!nm){ alert('Please enter your name'); byId('nameInput').focus(); return; }
  if(!state.avatarId){ alert('Please pick an avatar'); return; }
  state.name = nm;
  showView('view-difficulty');
});

/* ---------- difficulty -> build pool ---------- */
function pickDifficulty(level){
  state.difficulty = level;
  // shuffle and pick up to 10
  const pool = questionBank[level].slice();
  shuffle(pool);
  state.pool = pool.slice(0, Math.min(10, pool.length));
  state.index = 0;
  state.correctCount = 0;
  state.used5050 = false; state.usedHint = false;
  // reset lifeline buttons
  byId('btn5050').classList.remove('used');
  byId('btnHint').classList.remove('used');
  showView('view-quiz');
  renderQuestion();
}

/* ---------- render question ---------- */
function renderQuestion(){
  clearTimer();
  if(state.index >= state.pool.length){
    finishGame(true);
    return;
  }
  const q = state.pool[state.index];
  byId('questionText').textContent = q.q;

  const optContainer = byId('optionsContainer');
  optContainer.innerHTML = '';
  q.options.forEach((opt)=>{
    const btn = document.createElement('button');
    btn.className = 'answer-btn';
    btn.textContent = opt;
    btn.addEventListener('click', ()=> onAnswer(btn,opt) );
    optContainer.appendChild(btn);
  });

  // progress
  updateProgress();
  // restore progress-fill transition smooth
  byId('progressFill').style.transition = 'width 1s linear';
  // reset timer UI & start
  startTimer();
}

/* ---------- progress ---------- */
function updateProgress(){
  const total = state.pool.length || 1;
  const pct = (state.index/total) * 100;
  byId('progressFill').style.width = pct + '%';
}

/* ---------- timer ---------- */
function startTimer(){
  clearTimer();
  state.timerVal = 10;
  byId('timerValue').textContent = state.timerVal;
  // set width to 100% then animate down
  byId('progressFill').style.width = '100%';
  state.timerHandle = setInterval(()=>{
    state.timerVal--;
    byId('timerValue').textContent = state.timerVal;
    const pct = (state.timerVal/10) * 100;
    byId('progressFill').style.width = pct + '%';
    if(state.timerVal <= 0){
      clearTimer();
      onTimeout();
    }
  },1000);
}
function clearTimer(){ if(state.timerHandle){ clearInterval(state.timerHandle); state.timerHandle = null; } }

/* ---------- answer handling ---------- */
function onAnswer(btn, selected){
  // disable all options to prevent double-clicks
  const opts = Array.from(document.querySelectorAll('.answer-btn'));
  opts.forEach(b=>{ b.classList.add('disabled'); b.disabled = true; });

  clearTimer();
  const q = state.pool[state.index];
  const correct = q.answer;

  if(selected === correct){
    btn.classList.add('correct');
    state.correctCount++;
    showFunFact(q.fact);
    setTimeout(()=>{
      state.index++;
      renderQuestion();
    },1600);
  } else {
    btn.classList.add('wrong');
    opts.forEach(b=>{ if(b.textContent === correct) b.classList.add('correct'); });
    setTimeout(()=> finishGame(false), 1400);
  }
}

/* ---------- timeout ---------- */
function onTimeout(){
  // reveal correct then end
  const q = state.pool[state.index];
  const correct = q.answer;
  const opts = Array.from(document.querySelectorAll('.answer-btn'));
  opts.forEach(b=>{ b.classList.add('disabled'); b.disabled = true; if(b.textContent === correct) b.classList.add('correct'); });
  setTimeout(()=> finishGame(false), 900);
}

/* ---------- lifelines ---------- */
byId('btn5050').addEventListener('click', ()=>{
  if(state.used5050) return;
  state.used5050 = true;
  byId('btn5050').classList.add('used');

  const q = state.pool[state.index];
  const opts = Array.from(document.querySelectorAll('.answer-btn'));
  // collect wrong buttons
  const wrongBtns = opts.filter(b => b.textContent !== q.answer && !b.classList.contains('disabled'));
  shuffle(wrongBtns);
  // hide two wrong options (or as many as available)
  const toHide = wrongBtns.slice(0,2);
  toHide.forEach(b => { b.style.visibility = 'hidden'; });
});

byId('btnHint').addEventListener('click', ()=>{
  if(state.usedHint) return;
  state.usedHint = true;
  byId('btnHint').classList.add('used');

  const q = state.pool[state.index];
  showFunFact("Hint: " + q.hint, 2200);
});

/* ---------- fun fact popup ---------- */
const funFactEl = byId('funFact');
function showFunFact(text, closeAfter=1600){
  funFactEl.textContent = text || '';
  funFactEl.classList.add('show');
  funFactEl.setAttribute('aria-hidden','false');
  setTimeout(()=>{ funFactEl.classList.remove('show'); funFactEl.setAttribute('aria-hidden','true'); }, closeAfter);
}

/* ---------- finish game & leaderboard ---------- */
function finishGame(win){
  clearTimer();
  showView('view-end');
  const title = byId('endTitle');
  const playerSummary = byId('playerSummary');
  const badge = byId('badge');

  if(win){
    title.textContent = `üéâ Congratulations, ${state.name}! You Won!`;
    badge.classList.add('win');
  } else {
    title.textContent = `üò¢ You Lose, Better Luck Next Time`;
    badge.classList.remove('win');
  }

  playerSummary.innerHTML = `
    <div style="display:flex; align-items:center; gap:10px; justify-content:center; margin-top:8px">
      <div class="avatar-small" style="background:#fff; display:flex; align-items:center; justify-content:center; font-size:18px;">
        ${getAvatarEmoji(state.avatarId)}
      </div>
      <div style="text-align:left">
        <div style="font-weight:700">${state.name}</div>
        <div class="meta">${state.difficulty.toUpperCase()} ‚Ä¢ Score: ${state.correctCount}/${state.pool.length}</div>
      </div>
    </div>
  `;

  saveToLeaderboard(win);
  renderLeaderboard();
}

function saveToLeaderboard(win){
  // we only record wins per your earlier requirement; but I'll store all results and sort by wins+date
  const board = JSON.parse(localStorage.getItem('quizLeaderboard')||'[]');
  board.push({
    name: state.name,
    avatar: state.avatarId,
    difficulty: state.difficulty,
    score: state.correctCount,
    total: state.pool.length,
    date: new Date().toLocaleString(),
    win: !!win
  });
  // sort: wins first, then score desc, then recent
  board.sort((a,b)=> (b.win - a.win) || (b.score - a.score) || (new Date(b.date) - new Date(a.date)));
  localStorage.setItem('quizLeaderboard', JSON.stringify(board.slice(0,10)));
}

function renderLeaderboard(){
  const list = byId('leaderboardList');
  list.innerHTML = '';
  const board = JSON.parse(localStorage.getItem('quizLeaderboard')||'[]');
  board.forEach(entry=>{
    const li = document.createElement('li');
    li.style.marginBottom='6px';
    li.innerHTML = `<strong>${entry.name}</strong> (${entry.difficulty.toUpperCase()}) - ${entry.score}/${entry.total} ‚Ä¢ <span style="color:#666;font-size:12px">${entry.date}</span>`;
    list.appendChild(li);
  });
}

/* utility: shuffle */
function shuffle(arr){
  for(let i = arr.length-1; i>0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

/* start over handlers */
function restartFromEnd(){
  // restart same difficulty
  state.index = 0; state.correctCount = 0; state.used5050=false; state.usedHint=false;
  showView('view-quiz');
  renderQuestion();
  byId('btn5050').classList.remove('used'); byId('btnHint').classList.remove('used');
}
function returnToMenu(){
  // reset state and go home
  state = { name:'', avatarId:'', difficulty:'', pool:[], index:0, correctCount:0, timerVal:10, timerHandle:null, used5050:false, usedHint:false };
  // clear inputs
  byId('nameInput').value = '';
  avatarEls.forEach(a=>a.classList.remove('selected'));
  showView('view-start');
}

/* get avatar emoji by id */
function getAvatarEmoji(id){
  return ({ cat:'üê±', dog:'üê∂', owl:'ü¶â', alien:'üëΩ' }[id]||'üôÇ');
}

/* initial */
showView('view-start');
</script>
</body>
</html>
